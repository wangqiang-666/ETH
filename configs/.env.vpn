# VPN 环境配置文件
# 针对通过VPN连接OKX API的网络环境优化

# === 代理设置 ===
# 通过香港代理稳定访问OKX
USE_PROXY=true
FORCE_PROXY=true
HK_PROXY_URL=http://43.132.123.32:8080
PROXY_URL=http://43.132.123.32:8080
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1

# === 网络优化 ===
# VPN环境下的连接优化
REQUEST_TIMEOUT=20000
CONNECT_TIMEOUT=15000
SOCKET_TIMEOUT=25000

# DNS优化 - 使用可靠的DNS服务器
DNS_SERVERS=1.1.1.1,8.8.8.8,208.67.222.222

# === Node.js 优化 ===
# 强制IPv4，避免IPv6路由问题
NODE_OPTIONS=--dns-result-order=ipv4first --max-old-space-size=4096
UV_THREADPOOL_SIZE=16

# === 连接池配置 ===
# VPN环境下减少并发连接，提高稳定性
MAX_SOCKETS=8
MAX_FREE_SOCKETS=4
KEEP_ALIVE=false
KEEP_ALIVE_MSECS=3000

# === 重试策略 ===
# VPN可能不稳定，增加重试次数
MAX_RETRIES=5
RETRY_DELAY=2000
BACKOFF_FACTOR=1.5

# === 健康检查 ===
# 更频繁的健康检查
HEALTH_CHECK_INTERVAL=15000
HEALTH_CHECK_TIMEOUT=10000

# === 调试模式 ===
DEBUG_NETWORK=true
LOG_LEVEL=info

# === VPN特定优化 ===
# 禁用连接复用，避免VPN路由变化导致的连接问题
CONNECTION_REUSE=false
# 强制关闭持久连接
FORCE_CONNECTION_CLOSE=true
# 减少并发请求数
MAX_CONCURRENT_REQUESTS=3

# === 错误处理 ===
# VPN环境下更宽松的错误处理
CIRCUIT_BREAKER_THRESHOLD=15
CIRCUIT_BREAKER_TIMEOUT=90000

# === 缓存策略 ===
# VPN环境下延长缓存时间，减少网络请求
CACHE_TTL_MULTIPLIER=2.0
ENABLE_AGGRESSIVE_CACHING=true