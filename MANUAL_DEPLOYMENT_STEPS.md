# é¦™æ¸¯æœåŠ¡å™¨æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

### å‡†å¤‡å·¥ä½œ

1. **ç¡®ä¿å¯ä»¥SSHè¿æ¥åˆ°é¦™æ¸¯æœåŠ¡å™¨**
   ```bash
   ssh user@43.132.123.32
   ```

2. **éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶**
   - `hk_server_proxy.js` (ä»£ç†æœåŠ¡ä¸»æ–‡ä»¶)
   - `hk_server_package.json` (ä¾èµ–é…ç½®)

### ç¬¬ä¸€æ­¥ï¼šä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨

```bash
# æ–¹æ³•1: ä½¿ç”¨scpä¸Šä¼ 
scp d:/Trae/Cache/ETH/hk_server_proxy.js user@43.132.123.32:/tmp/
scp d:/Trae/Cache/ETH/hk_server_package.json user@43.132.123.32:/tmp/

# æ–¹æ³•2: ä½¿ç”¨WinSCPæˆ–å…¶ä»–FTPå·¥å…·ä¸Šä¼ åˆ° /tmp/ ç›®å½•
```

### ç¬¬äºŒæ­¥ï¼šåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œéƒ¨ç½²

**SSHè¿æ¥åˆ°æœåŠ¡å™¨åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š**

```bash
# 1. æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£…Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# 3. å®‰è£…PM2
sudo npm install -g pm2

# 4. åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /opt/okx-proxy
sudo chown $USER:$USER /opt/okx-proxy
cd /opt/okx-proxy

# 5. ç§»åŠ¨ä¸Šä¼ çš„æ–‡ä»¶
mv /tmp/hk_server_proxy.js ./
mv /tmp/hk_server_package.json ./package.json

# 6. å®‰è£…ä¾èµ–
npm install

# 7. é…ç½®é˜²ç«å¢™
sudo ufw allow 8080/tcp

# 8. å¯åŠ¨æœåŠ¡
pm2 start hk_server_proxy.js --name "okx-proxy"

# 9. è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
pm2 save
```

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status

# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# æµ‹è¯•æ—¶é—´æ¥å£
curl http://localhost:8080/time

# æµ‹è¯•APIä»£ç†
curl "http://localhost:8080/api/v5/market/tickers?instType=SWAP&instId=BTC-USDT-SWAP"
```

### ç¬¬å››æ­¥ï¼šå¤–ç½‘è®¿é—®æµ‹è¯•

**åœ¨æœ¬åœ°ç”µè„‘ä¸Šæµ‹è¯•ï¼š**

```bash
# Windows PowerShell
Invoke-WebRequest -Uri "http://43.132.123.32:8080/health"
Invoke-WebRequest -Uri "http://43.132.123.32:8080/time"

# æˆ–ä½¿ç”¨curl
curl http://43.132.123.32:8080/health
curl http://43.132.123.32:8080/time
```

## ğŸ”§ æœåŠ¡ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs okx-proxy

# é‡å¯æœåŠ¡
pm2 restart okx-proxy

# åœæ­¢æœåŠ¡
pm2 stop okx-proxy

# åˆ é™¤æœåŠ¡
pm2 delete okx-proxy

# ç›‘æ§é¢æ¿
pm2 monit
```

## ğŸš¨ æ•…éšœæ’é™¤

### 1. æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep :8080

# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
pm2 logs okx-proxy --err
```

### 2. å¤–ç½‘æ— æ³•è®¿é—®
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# æ£€æŸ¥æœåŠ¡ç›‘å¬
sudo netstat -tlnp | grep :8080

# æ£€æŸ¥äº‘æœåŠ¡å™¨å®‰å…¨ç»„
# ç¡®ä¿åœ¨äº‘æœåŠ¡å™¨æ§åˆ¶å°å¼€æ”¾8080ç«¯å£
```

### 3. APIè¯·æ±‚å¤±è´¥
```bash
# æµ‹è¯•æœåŠ¡å™¨ç½‘ç»œ
curl -I https://www.okx.com

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
pm2 logs okx-proxy --lines 50
```

## âœ… éƒ¨ç½²æˆåŠŸæ ‡å¿—

å½“çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºæ—¶ï¼Œè¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼š

1. **PM2çŠ¶æ€æ˜¾ç¤º**ï¼š
   ```
   â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ id  â”‚ name     â”‚ namespace   â”‚ version â”‚ mode    â”‚ pid      â”‚ uptime â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ mem      â”‚ user     â”‚ watching â”‚
   â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 0   â”‚ okx-proxyâ”‚ default     â”‚ 1.0.0   â”‚ fork    â”‚ 12345    â”‚ 5s     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 25.0mb   â”‚ user     â”‚ disabled â”‚
   â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

2. **å¥åº·æ£€æŸ¥è¿”å›**ï¼š
   ```json
   {"status":"ok","timestamp":"2025-01-31T07:00:00.000Z","uptime":5.123}
   ```

3. **æœ¬åœ°å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ**ï¼š
   - ç›‘æ§ç³»ç»Ÿæ˜¾ç¤ºï¼š`âœ“ ä»£ç†è¿æ¥æ­£å¸¸: http://43.132.123.32:8080`
   - èƒ½å¤Ÿè·å–åˆ°çœŸå®çš„BTC/ETHæ•°æ®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. PM2çŠ¶æ€æˆªå›¾ï¼š`pm2 status`
2. æœåŠ¡æ—¥å¿—ï¼š`pm2 logs okx-proxy --lines 20`
3. ç½‘ç»œæµ‹è¯•ç»“æœï¼š`curl http://localhost:8080/health`
4. ç³»ç»Ÿä¿¡æ¯ï¼š`uname -a && node --version`