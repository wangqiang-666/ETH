# ETH合约智能推荐系统 - 环境配置模板
# 复制此文件为 .env 并根据您的环境进行配置

# ===== 基础配置 =====
# 应用环境
NODE_ENV=production
WEB_PORT=3031
LOG_LEVEL=info

# ===== 网络配置 =====
# 代理设置 (如需通过VPN访问OKX API)
USE_PROXY=false
FORCE_PROXY=false
HK_PROXY_URL=
PROXY_URL=
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1

# 网络超时设置
REQUEST_TIMEOUT=15000
CONNECT_TIMEOUT=10000
SOCKET_TIMEOUT=20000

# DNS优化
DNS_SERVERS=1.1.1.1,8.8.8.8,208.67.222.222

# ===== Node.js 优化 =====
# 内存和线程池配置
NODE_OPTIONS=--dns-result-order=ipv4first --max-old-space-size=4096
UV_THREADPOOL_SIZE=16

# ===== 连接池配置 =====
# 并发连接控制
MAX_SOCKETS=16
MAX_FREE_SOCKETS=8
KEEP_ALIVE=true
KEEP_ALIVE_MSECS=5000

# ===== 重试策略 =====
# 网络请求重试配置
MAX_RETRIES=3
RETRY_DELAY=1000
BACKOFF_FACTOR=1.2

# ===== 健康检查 =====
# 系统健康监控
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ===== 调试模式 =====
# 开发调试配置
DEBUG_NETWORK=false
VERBOSE_LOGGING=false

# ===== 连接优化 =====
# 连接复用和并发控制
CONNECTION_REUSE=true
FORCE_CONNECTION_CLOSE=false
MAX_CONCURRENT_REQUESTS=10

# ===== 错误处理 =====
# 熔断器配置
CIRCUIT_BREAKER_THRESHOLD=10
CIRCUIT_BREAKER_TIMEOUT=60000

# ===== 缓存策略 =====
# 数据缓存配置
CACHE_TTL_MULTIPLIER=1.0
ENABLE_AGGRESSIVE_CACHING=false

# ===== Kronos 模型服务配置 =====
# AI模型集成设置
KRONOS_ENABLED=true
KRONOS_BASE_URL=http://localhost:8001
KRONOS_TIMEOUT_MS=1200
KRONOS_INTERVAL=1H
KRONOS_LOOKBACK=480
KRONOS_LONG_THRESHOLD=0.62
KRONOS_SHORT_THRESHOLD=0.62
KRONOS_MIN_CONFIDENCE=0.55

# ===== OKX API 配置 =====
# 交易所API设置 (可选，用于实盘交易)
# OKX_API_KEY=your_api_key_here
# OKX_SECRET_KEY=your_secret_key_here
# OKX_PASSPHRASE=your_passphrase_here
# OKX_SANDBOX=true

# ===== 机器学习配置 =====
# 本地ML模型设置
ML_ENABLED=true
ML_MODEL_TYPE=ensemble
ML_TRAINING_SIZE=500
ML_RETRAIN_INTERVAL=50
ML_MIN_TRAINING=50

# ===== 交易配置 =====
# 策略参数设置
DEFAULT_SYMBOL=ETH-USDT-SWAP
MAX_LEVERAGE=20
MAX_DAILY_LOSS=0.05
STOP_LOSS_PERCENT=0.02
TAKE_PROFIT_PERCENT=0.028
SIGNAL_THRESHOLD=0.5
MIN_WIN_RATE=0.55

# ===== 风险管理 =====
# 风险控制参数
MAX_POSITIONS=5
MAX_EXPOSURE=0.3
COOLDOWN_PERIOD=1800000
OPPOSITE_CONSTRAINT=true

# ===== 数据库配置 =====
# SQLite数据库设置
DB_PATH=./data/recommendations.db
DB_BACKUP_ENABLED=true
DB_BACKUP_INTERVAL=86400000

# ===== 安全配置 =====
# 系统安全设置
ENABLE_CORS=true
CORS_ORIGIN=*
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=900000